class LeadCapture {
    constructor(){
        this.m={s:Date.now(),i:0,f:0};
        this.init()
    }
    init(){
        document.addEventListener('focusin',e=>{
            if(e.target.tagName==='INPUT')this.m.f++
        },{passive:1});
        const f=document.getElementById('leadForm');
        f&&f.addEventListener('submit',e=>this.hs(e))
    }
    async hs(e){
        e.preventDefault();
        const f=new FormData(e.target);
        if(!f.get('nome')||!f.get('tel'))return;
        const b=document.getElementById('submitBtn');
        b.disabled=1,b.textContent='Processando...';
        try{
            await fetch('URL_SCRIPT',{
                method:'POST',
                body:JSON.stringify({
                    n:f.get('nome'),
                    t:f.get('tel'),
                    e:f.get('email')
                }),
                keepalive:1
            });
            localStorage.setItem('fc',1);
            location.href='home.html';
        }catch{
            b.disabled=0,b.textContent='ðŸ‘‰ Acessar Agora';
        }
    }
}
document.addEventListener('DOMContentLoaded',()=>new LeadCapture());
